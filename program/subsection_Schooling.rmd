Sample is restricted to school age children at the initial period. This is because we use initial variable in ANCOVA. In addition, we drop children with no enrollment information for three periods. 
<!--
ANCOVA estimates should be used only to school age children in 2012 who are not old enough that they may naturally stop schooling by the endline.
-->

```{r ReadTrimSchoolingFDData2 original HHs in R file one, echo = F, cache = F, warning = F, results = "hide", message = F}
source(paste0(pathprogram, "ReadTrimSchoolingOriginalHHsFDData2.R"))
```
```{r schooling FD read data original HHs, echo = F, warning = F, message = F}
s1x[, Enrolled := as.numeric(Enrolled)]
s1x[, Tee := .N, by = HHMid]
```
```{r Enrollment pattern in original panel, echo = F, eval = F}
addmargins(table0(s.1x[tee == 1, .(ObPattern, SchPattern)]))
```

* `ReadTrimSchoolingOriginalHHsFDData2.R` creates a variable called `SchPattern` that summarises enrollment pattern in the panel and merges with livestock data to attach baseline cattle holding. We drop all observations with `nnn` (NA in three consecutive rounds) in `SchPattern`.^[`n` indicates NA (either attrition or not reported). ]  Student level schooling panel data have `r nrow(s.1x)` rows. We drop `r nrow(s.1x[grepl("nnn", SchPattern), ])` observations with `nnn` in `SchPattern`. 
* `r table(s1x[tee == 1, Tee])` individuals are repeatedly observed for `r names(table(s1x[tee == 1, Tee]))` times, respectively. ANCOVA is estimated with data after dropping observations with `nnn` in `SchPattern`.
* See [ReadTrimSchoolingOriginalHHsFDData2.R](../program/ReadTrimSchoolingOriginalHHsFDData2.R) to see the code.  
* See also [SchoolingCovariateSelectionANCOVA3.R](../program/SchoolingCovariateSelectionANCOVA3.R) to see the code of covariate selection.  


```{r schooling regression set parameters ANCOVA, warning = F, message = F}
#### Read schooling data and drop observations with nnn in SchPattern
source(paste0(pathprogram, "ReadTrimSchoolingANCOVA.R"))
#### Set file name to be used in saving results
FileName <- "Schooling"
#### Regression types
FileNameHeader <- c("", "Attributes", "PovertyStatus",
  "TimeVarying", "TimeVaryingAttributes",
  "TimeVaryingPovertyStatus", "TimeVaryingPovertyStatusAttributes")
regsuffixes <- c("", "a", "P", "T", "Ta", "TP", "TPa")
#### For schooling, we drop estimation by poverty class
regsuffixes <- c("", "a", "P", "T", "Ta")
#### Below 2 objects are used internally to select covariates
listheader <- paste0("sc", regsuffixes)
exclheader <- paste0("excl", regsuffixes)
inclheader <- gsub("ex", "in", exclheader)
#### Choose covariates
source(paste0(pathprogram, "SchoolingCovariateSelectionANCOVA3.R"))
#### jay: Number of regression speficiations including OLS (=6 in schooling)
jay <- max(as.numeric(gsub("incl", "", ls(pattern = "^incl\\d"))))
#### Regressand of each reg specification
Regressands <- rep("Enrolled", jay)
#### Data to be used: s1 (produced in ReadTrimSchoolingANCOVA.R)
DataToUse1 <- DataToUse2 <- rep("s1", jay)
#### LaTeX tabulation specifications
Addseparatingcols = NULL; Separatingcolwidth = .2
dig.depmean <- 2
AddMeanStdColumn <- UseRawDataForDestat <- T
#### Estimate
source(paste0(pathprogram, "ANCOVAEstimationFile3.R"))
```

<details><summary>Click here to see the table of time varying schooling impacts by arm.</summary>
`Enrolled0` is the baseline dependent variable of ANCOVA, `ChilAgeOrderAtRd1, Household size0` are baseline covariates.  (1) is OLS, (2)-(5) are ANCOVA estimates.  

`r HTML_Schooling`
Notes:  

1. `r paste(TabFNAncovaTop, TabFNArm, TabFNSch, TabFN1stCol)`  
2. `r TabFNPval`
</details>

<details><summary>Click here to see the table of time varying schooling impacts by arm.</summary>

<div class = "row">
<div class = "col-md-6">
```{r plot HTML_SchoolingTimeVarying, echo=FALSE}
HTML_SchoolingTimeVarying
```
</div>
<div class = "col-md-6">
```{r plot HTML_SchoolingTimeVarying 2, echo=FALSE}
HTML_SchoolingTimeVarying
```
</div>
</div>
</details>

<details><summary>Click here to see the table of time varying schooling impacts by functional attribute.</summary>
`r HTML_SchoolingTimeVaryingAttributes`
</details>
<details><summary>Click here to see the table of schooling impacts by poverty class.</summary>
`r HTML_SchoolingPovertyStatus`
</details>


